(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[276],{7490:(e,l,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/blog/allBlog",function(){return t(4756)}])},4756:(e,l,t)=>{"use strict";t.r(l),t.d(l,{default:()=>b});var s=t(4848),r=t(4335),a=t(867),c=t(1106),d=t.n(c),n=t(6715),i=t(8465),o=t.n(i),x=t(6540),h=t(3384);let b=()=>{let[e,l]=(0,x.useState)(!1),[t,c]=(0,x.useState)(null),i=(0,n.useRouter)(),{authAdmin:b,HandleLogout:m,allBlogPosts:u,setAllBlogPosts:g,blogLoading:p}=(0,x.useContext)(h.A);(0,x.useEffect)(()=>{b.isAuth||i.push("/login")},[b]);let f=async e=>{try{c(e);let l=await r.A.delete("".concat("https://instix-backend-v2.vercel.app/","api/admin/blog/delete/").concat(e),{headers:{Authorization:"Bearer ".concat(b.token)}});l.data.success&&(g(l=>l.filter(l=>l._id!==e)),o().fire({icon:"success",title:l.data.message,confirmButtonColor:"#4caf50"}))}catch(e){console.log(e),o().fire({icon:"error",title:"An error occurred",text:e.response.data.message,confirmButtonColor:"#d33"})}finally{c(null)}},j=e=>{i.push({pathname:"/admin",query:{id:e._id}})};return(0,s.jsxs)("div",{className:"min-h-screen flex flex-col lg:flex-row justify-evenly bg-black py-36 px-4 sm:px-6 lg:px-8",children:[(0,s.jsx)("div",{className:"max-w-3xl w-full lg:w-[70%] mx-auto",children:(0,s.jsxs)("div",{className:"bg-white h-auto rounded-lg shadow-lg p-6 space-y-6",children:[(0,s.jsx)("div",{className:"border-b pb-4",children:(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Create New Blog Post"})}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"table-auto w-full",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"border text-black p-2.5",children:"Image"}),(0,s.jsx)("th",{className:"border text-black p-2.5",children:"Title"}),(0,s.jsx)("th",{className:"border text-black p-2.5",children:"Category"}),(0,s.jsx)("th",{className:"border text-black p-2.5",children:"Action"})]})}),(0,s.jsx)("tbody",{children:p?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:"4",className:"text-center p-4 text-black font-semibold",children:"Loading..."})}):0===u.length?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:"4",className:"text-center p-4 text-black font-semibold",children:"No blogs found"})}):u.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"border p-2.5",children:(0,s.jsx)("img",{src:e.image.url,alt:e.title,className:"w-16 h-16 object-cover"})}),(0,s.jsx)("td",{className:"border text-black p-2.5",children:(0,s.jsx)(d(),{href:"/blog/".concat(e._id),className:"text-black hover:underline hover:text-blue-500",children:e.title})}),(0,s.jsx)("td",{className:"border text-black p-2.5",children:e.category}),(0,s.jsxs)("td",{className:"border p-2.5 flex items-center justify-center flex-col gap-2",children:[(0,s.jsx)("button",{onClick:()=>j(e),className:"bg-[#FACC15] hover:bg-[#facc15c6] text-black py-1 px-4 rounded-full text-xs",children:"Edit"}),(0,s.jsx)("button",{onClick:()=>f(e._id),className:"bg-red-500 hover:bg-red-700 text-white py-1 px-4 rounded-full text-xs",children:t===e._id?"Deleting...":"Delete"})]})]},e._id))})]})})]})}),(0,s.jsx)("div",{className:"max-w-3xl w-full lg:w-[30%] mx-auto mt-8 lg:mt-0",children:(0,s.jsxs)("div",{className:"bg-[#0a0b0d] rounded-lg p-4 w-full",children:[(0,s.jsxs)("div",{className:"flex justify-between mb-6 pb-3 items-center border-b border-gray-700",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold",children:"Admin Panel"}),(0,s.jsxs)("button",{type:"button",onClick:m,className:"px-3 py-1.5 xl:px-4 xl:py-2 text-xs xl:text-sm font-light hover:bg-white hover:text-black flex items-center border border-white rounded-[30px]",children:["Log out",(0,s.jsx)("div",{className:"ml-2 bg-white rounded-full p-1 inline-flex items-center justify-center",children:(0,s.jsx)(a.A,{className:"h-4 w-4 text-black"})})]})]}),(0,s.jsx)(d(),{href:"/admin",children:(0,s.jsx)("div",{className:"w-full bg-gray-900 py-2 px-3 rounded-md hover:bg-gray-800 cursor-pointer",children:"Create New Blog Post"})}),(0,s.jsxs)(d(),{href:"/admin/blog/allBlog",children:[" ",(0,s.jsx)("div",{className:"w-full mt-2 bg-gray-900 py-2 px-3 rounded-md hover:bg-gray-800 cursor-pointer",children:"All Blog Posts"})]})]})})]})}}},e=>{var l=l=>e(e.s=l);e.O(0,[636,593,792],()=>l(7490)),_N_E=e.O()}]);