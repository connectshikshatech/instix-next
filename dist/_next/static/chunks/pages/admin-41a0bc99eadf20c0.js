(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[309],{8488:(e,t,l)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin",function(){return l(3512)}])},5946:(e,t,l)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var l in t)Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}(t,{default:function(){return n},noSSR:function(){return o}});let a=l(7677);l(4848),l(6540);let r=a._(l(5645));function s(e){return{default:(null==e?void 0:e.default)||e}}function o(e,t){return delete t.webpack,delete t.modules,e(t)}function n(e,t){let l=r.default,a={loading:e=>{let{error:t,isLoading:l,pastDelay:a}=e;return null}};e instanceof Promise?a.loader=()=>e:"function"==typeof e?a.loader=e:"object"==typeof e&&(a={...a,...e});let n=(a={...a,...t}).loader;return(a.loadableGenerated&&(a={...a,...a.loadableGenerated},delete a.loadableGenerated),"boolean"!=typeof a.ssr||a.ssr)?l({...a,loader:()=>null!=n?n().then(s):Promise.resolve(s(()=>null))}):(delete a.webpack,delete a.modules,o(l,a))}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},4319:(e,t,l)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"LoadableContext",{enumerable:!0,get:function(){return a}});let a=l(7677)._(l(6540)).default.createContext(null)},5645:(e,t,l)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return m}});let a=l(7677)._(l(6540)),r=l(4319),s=[],o=[],n=!1;function i(e){let t=e(),l={loading:!0,loaded:null,error:null};return l.promise=t.then(e=>(l.loading=!1,l.loaded=e,e)).catch(e=>{throw l.loading=!1,l.error=e,e}),l}class d{promise(){return this._res.promise}retry(){this._clearTimeouts(),this._res=this._loadFn(this._opts.loader),this._state={pastDelay:!1,timedOut:!1};let{_res:e,_opts:t}=this;e.loading&&("number"==typeof t.delay&&(0===t.delay?this._state.pastDelay=!0:this._delay=setTimeout(()=>{this._update({pastDelay:!0})},t.delay)),"number"==typeof t.timeout&&(this._timeout=setTimeout(()=>{this._update({timedOut:!0})},t.timeout))),this._res.promise.then(()=>{this._update({}),this._clearTimeouts()}).catch(e=>{this._update({}),this._clearTimeouts()}),this._update({})}_update(e){this._state={...this._state,error:this._res.error,loaded:this._res.loaded,loading:this._res.loading,...e},this._callbacks.forEach(e=>e())}_clearTimeouts(){clearTimeout(this._delay),clearTimeout(this._timeout)}getCurrentValue(){return this._state}subscribe(e){return this._callbacks.add(e),()=>{this._callbacks.delete(e)}}constructor(e,t){this._loadFn=e,this._opts=t,this._callbacks=new Set,this._delay=null,this._timeout=null,this.retry()}}function u(e){return function(e,t){let l=Object.assign({loader:null,loading:null,delay:200,timeout:null,webpack:null,modules:null},t),s=null;function i(){if(!s){let t=new d(e,l);s={getCurrentValue:t.getCurrentValue.bind(t),subscribe:t.subscribe.bind(t),retry:t.retry.bind(t),promise:t.promise.bind(t)}}return s.promise()}if(!n){let e=l.webpack?l.webpack():l.modules;e&&o.push(t=>{for(let l of e)if(t.includes(l))return i()})}function u(e,t){!function(){i();let e=a.default.useContext(r.LoadableContext);e&&Array.isArray(l.modules)&&l.modules.forEach(t=>{e(t)})}();let o=a.default.useSyncExternalStore(s.subscribe,s.getCurrentValue,s.getCurrentValue);return a.default.useImperativeHandle(t,()=>({retry:s.retry}),[]),a.default.useMemo(()=>{var t;return o.loading||o.error?a.default.createElement(l.loading,{isLoading:o.loading,pastDelay:o.pastDelay,timedOut:o.timedOut,error:o.error,retry:s.retry}):o.loaded?a.default.createElement((t=o.loaded)&&t.default?t.default:t,e):null},[e,o])}return u.preload=()=>i(),u.displayName="LoadableComponent",a.default.forwardRef(u)}(i,e)}function c(e,t){let l=[];for(;e.length;){let a=e.pop();l.push(a(t))}return Promise.all(l).then(()=>{if(e.length)return c(e,t)})}u.preloadAll=()=>new Promise((e,t)=>{c(s).then(e,t)}),u.preloadReady=e=>(void 0===e&&(e=[]),new Promise(t=>{let l=()=>(n=!0,t());c(o,e).then(l,l)})),window.__NEXT_PRELOADREADY=u.preloadReady;let m=u},3512:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>x});var a=l(4848),r=l(6540);let s=(0,l(3943).A)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);var o=l(867),n=l(4335),i=l(8465),d=l.n(i),u=l(6715),c=l(4953),m=l.n(c);l(45);let p=m()(()=>l.e(266).then(l.bind(l,4266)),{loadableGenerated:{webpack:()=>[4266]},ssr:!1}),f=e=>{let{setDescription:t,description:s}=e,[o,n]=(0,r.useState)(null);return(0,r.useEffect)(()=>{l.e(266).then(l.bind(l,4266)).then(e=>{n({toolbar:{container:[[{header:"1"},{header:"2"},{header:"3"},{header:"4"},{font:[]}],[{size:[]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"}],["link","image"],["clean"],["code-block"],[{align:[]}],[{color:[]},{background:[]}],["table"]]}})})},[]),(0,a.jsx)("div",{children:o&&(0,a.jsx)(p,{theme:"snow",value:s,onChange:t,modules:o,className:"h-auto"})})};var h=l(1106),b=l.n(h),g=l(3384);let x=()=>{let[e,t]=(0,r.useState)(""),[l,i]=(0,r.useState)(""),[c,m]=(0,r.useState)(""),[p,h]=(0,r.useState)(""),[x,y]=(0,r.useState)(""),[v,w]=(0,r.useState)(null),[j,_]=(0,r.useState)(!1),{authAdmin:k,HandleLogout:N,setAllBlogPosts:C}=(0,r.useContext)(g.A),P=(0,r.useRef)(null),D=(0,u.useRouter)();(0,r.useEffect)(()=>{k.isAuth||D.push("/login")},[k]);let{id:E}=D.query,O=async()=>{let e=await n.A.get("".concat("https://instix-backend-v2.vercel.app/","api/admin/blog/get/").concat(E));e.data.success&&(m(e.data.data.title),y(e.data.data.category),i(e.data.data.description),h(e.data.data.metaKeywords),t(e.data.data.metaDescription),w(e.data.data.image?e.data.data.image.url:null))};(0,r.useEffect)(()=>{if(void 0===E){m(""),y(""),i(""),h(""),t(""),w(null);return}if(E)try{O()}catch(e){console.error("Error fetching blog:",e)}},[E]);let T=(0,r.useCallback)(e=>{e.preventDefault();let t=e.dataTransfer.files[0];t&&w(t)},[]),A=(0,r.useCallback)(e=>{e.preventDefault()},[]),S=async a=>{a.preventDefault();let r=new FormData;r.append("title",c),r.append("category",x),r.append("description",l),r.append("metaKeywords",p),r.append("metaDescription",e),r.append("image",v);try{_(!0);let e=await n.A.post("".concat("https://instix-backend-v2.vercel.app/","api/admin/blog/create"),r,{headers:{Authorization:"Bearer ".concat(k.token),"Content-Type":"multipart/form-data"}});e.data.success&&(C(t=>[...t,e.data.data]),m(""),y(""),i(""),h(""),t(""),w(null),d().fire({icon:"success",title:e.data.message,confirmButtonColor:"#4caf50"}))}catch(e){console.log(e),d().fire({icon:"error",title:"An error occurred",text:e.response.data.message,confirmButtonColor:"#d33"})}finally{_(!1)}},B=()=>{D.push({pathname:"/preview",query:{title:c,category:x,description:l,metaKeywords:p,metaDescription:e}})},F=async a=>{a.preventDefault();let r=new FormData;r.append("title",c),r.append("category",x),r.append("description",l),r.append("metaKeywords",p),r.append("metaDescription",e),r.append("image",v);try{_(!0);let e=await n.A.post("".concat("https://instix-backend-v2.vercel.app/","api/admin/blog/update/").concat(E),r,{headers:{Authorization:"Bearer ".concat(k.token),"Content-Type":"multipart/form-data"}});e.data.success&&(C(t=>t.map(t=>t._id===E?e.data.data:t)),m(""),y(""),i(""),h(""),t(""),w(null),d().fire({icon:"success",title:e.data.message,confirmButtonColor:"#4caf50"}))}catch(e){console.log(e),d().fire({icon:"error",title:"An error occurred",text:e.response.data.message,confirmButtonColor:"#d33"})}finally{_(!1)}};return(0,a.jsxs)("div",{className:"min-h-screen flex flex-col lg:flex-row justify-evenly bg-black py-36 px-4 sm:px-6 lg:px-8",children:[(0,a.jsx)("div",{className:"max-w-3xl w-full lg:w-[70%] mx-auto",children:(0,a.jsxs)("div",{className:"bg-white h-auto rounded-lg shadow-lg p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"border-b pb-4",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:E?"Edit Blog Post":"Create New Blog Post"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Fill in the details to create your new blog post"})]}),(0,a.jsxs)("form",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Blog Title"}),(0,a.jsx)("input",{type:"text",id:"title",className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 text-gray-900 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",placeholder:"Enter your blog title",value:c,onChange:e=>m(e.target.value)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"metaKeywords",className:"block text-sm font-medium text-gray-700",children:"Meta Keywords"}),(0,a.jsx)("input",{type:"text",id:"metaKeywords",className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 text-gray-900 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",placeholder:"Enter meta keywords",value:p,onChange:e=>h(e.target.value)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700",children:"Blog Category"}),(0,a.jsxs)("select",{id:"category",className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 text-gray-900 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",value:x,onChange:e=>y(e.target.value),children:[(0,a.jsx)("option",{value:"",children:"Select Category"}),(0,a.jsx)("option",{value:"Crypto Trading",children:"Crypto Trading"}),(0,a.jsx)("option",{value:"OTC Crypto Platform",children:"OTC Crypto Platform"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Featured Image"}),(0,a.jsxs)("div",{className:"mt-1 flex justify-center rounded-lg border-2 border-dashed p-6 border-gray-300",onDrop:T,onDragOver:A,onClick:()=>{P.current.click()},children:[(0,a.jsx)("input",{type:"file",ref:P,style:{display:"none"},onChange:e=>{let t=e.target.files[0];t&&w(t)}}),v?(0,a.jsx)("img",{src:"string"==typeof v?v:URL.createObjectURL(v),alt:"Featured",className:"h-32"}):(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(s,{className:"mx-auto h-10 w-10 text-blue-500"}),(0,a.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:"Drag & drop to upload or click to select"})]})]})]}),(0,a.jsxs)("div",{className:"h-auto",children:[(0,a.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Description"}),(0,a.jsx)(f,{setDescription:i,description:l})]}),(0,a.jsxs)("div",{className:"h-auto",children:[(0,a.jsx)("label",{htmlFor:"metaDescription",className:"block text-sm font-medium text-gray-700",children:"Meta Description"}),(0,a.jsx)(f,{setDescription:t,description:e})]}),(0,a.jsxs)("div",{className:"flex justify-end",children:[(0,a.jsx)("button",{type:"button",onClick:()=>B(),className:"rounded-full bg-yellow-500 px-4 py-2 text-sm font-medium text-black hover:bg-yellow-300 focus:outline-none focus:ring-2 focus:ring-black focus:ring-offset-2 mr-4",children:"Preview"}),E?(0,a.jsx)("button",{type:"button",onClick:e=>F(e),className:"rounded-full bg-yellow-500 px-4 py-2 text-sm font-medium text-black hover:bg-yellow-300 focus:outline-none focus:ring-2 focus:ring-black focus:ring-offset-2",children:j?"Loading...":" Update Post"}):(0,a.jsx)("button",{type:"button",onClick:e=>S(e),className:"rounded-full bg-yellow-500 px-4 py-2 text-sm font-medium text-black hover:bg-yellow-300 focus:outline-none focus:ring-2 focus:ring-black focus:ring-offset-2",children:j?"Loading...":" Publish Post"})]})]})]})}),(0,a.jsx)("div",{className:"max-w-3xl w-full lg:w-[30%] mx-auto mt-8 lg:mt-0",children:(0,a.jsxs)("div",{className:"bg-[#0a0b0d] rounded-lg p-4 w-full",children:[(0,a.jsxs)("div",{className:"flex justify-between mb-6 pb-3 items-center border-b border-gray-700",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"Admin Panel"}),(0,a.jsxs)("button",{type:"button",onClick:N,className:"px-3 py-1.5 xl:px-4 xl:py-2 text-xs xl:text-sm font-light hover:bg-white hover:text-black flex items-center border border-white rounded-[30px]",children:["Log out",(0,a.jsx)("div",{className:"ml-2 bg-white rounded-full p-1 inline-flex items-center justify-center",children:(0,a.jsx)(o.A,{className:"h-4 w-4 text-black"})})]})]}),(0,a.jsx)(b(),{href:"/admin",children:(0,a.jsx)("div",{className:"w-full bg-gray-900 py-2 px-3 rounded-md hover:bg-gray-800 cursor-pointer",children:"Create New Blog Post"})}),(0,a.jsxs)(b(),{href:"/admin/blog/allBlog",children:[" ",(0,a.jsx)("div",{className:"w-full mt-2 bg-gray-900 py-2 px-3 rounded-md hover:bg-gray-800 cursor-pointer",children:"All Blog Posts"})]})]})})]})}},45:()=>{},4953:(e,t,l)=>{e.exports=l(5946)}},e=>{var t=t=>e(e.s=t);e.O(0,[838,636,593,792],()=>t(8488)),_N_E=e.O()}]);